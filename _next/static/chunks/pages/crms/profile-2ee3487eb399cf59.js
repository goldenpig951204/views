(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{59742:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(63366),a=n(87462),o=n(67294),s=n(86010),l=n(94780),i=n(29630),u=n(78884),c=n(67074),d=n(1588),f=n(34867);function m(e){return(0,f.Z)("MuiCardHeader",e)}let p=(0,d.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=n(85893);let v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],g=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,t)},w=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({[`& .${p.title}`]:t.title,[`& .${p.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),k=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),x=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),C=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),b=o.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:l,className:c,component:d="div",disableTypography:f=!1,subheader:m,subheaderTypographyProps:p,title:b,titleTypographyProps:y}=n,j=(0,r.Z)(n,v),P=(0,a.Z)({},n,{component:d,disableTypography:f}),S=g(P),Z=b;null==Z||Z.type===i.Z||f||(Z=(0,h.jsx)(i.Z,(0,a.Z)({variant:l?"body2":"h5",className:S.title,component:"span",display:"block"},y,{children:Z})));let O=m;return null==O||O.type===i.Z||f||(O=(0,h.jsx)(i.Z,(0,a.Z)({variant:l?"body2":"body1",className:S.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:O}))),(0,h.jsxs)(w,(0,a.Z)({className:(0,s.Z)(S.root,c),as:d,ref:t,ownerState:P},j,{children:[l&&(0,h.jsx)(k,{className:S.avatar,ownerState:P,children:l}),(0,h.jsxs)(C,{className:S.content,ownerState:P,children:[Z,O]}),o&&(0,h.jsx)(x,{className:S.action,ownerState:P,children:o})]}))});var y=b},30417:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/profile",function(){return n(21983)}])},21983:function(e,t,n){"use strict";n.r(t);var r=n(85893),a=n(67294),o=n(79072),s=n(49837),l=n(59742),i=n(91359),u=n(61953),c=n(55343),d=n(67836),f=n(32631),m=n(75084),p=n(74231),h=n(86501),v=n(87536),g=n(47533),w=n(21609),k=n(76627),x=n.n(k),C=n(17288),b=n(77718),y=n.n(b),j=n(5464),P=n(94314),S=n(51514);n(16250);let Z=()=>{let{user:e}=(0,C.a)(),{settings:t}=(0,S.r)(),[n,k]=(0,a.useState)({}),b=p.Ry().shape({firstName:p.Z_().required("First name is required field."),lastName:p.Z_().required("Last name is required field."),email:p.Z_().email("Email is invalid.").required("Email is required field."),phone:p.Z_().min(10,"Phone number must be 10 digits.").required("Phone number is required field.")}),{reset:P,control:Z,handleSubmit:O,formState:{errors:E}}=(0,v.cI)({defaultValues:{firstName:"",lastName:"",email:"",phone:""},mode:"onChange",resolver:(0,g.X)(b)}),M=p.Ry().shape({currentPassword:p.Z_().required("Current password is required field."),newPassword:p.Z_().min(8,"Password must be at least 8 characters.").required("New password is required field."),confirmPassword:p.Z_().test("password-match","Passwors must match",function(e){return this.parent.newPassword===e}).required("Confirm password is required field.")}),{reset:I,control:N,handleSubmit:D,formState:{errors:_}}=(0,v.cI)({defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""},mode:"onChange",resolver:(0,g.X)(M)});(0,a.useEffect)(()=>{P(e)},[]);let V=async t=>{let r=new FormData;r.append("firstName",t.firstName),r.append("lastName",t.lastName),r.append("email",t.email),Object.keys(n)&&r.append("avatar",n.file);let{data:a}=await j.Z.put("crms/auth/profile/".concat(e._id),r,{headers:{"Content-Type":"multipart/form-data"}});a.status?h.ZP.success(a.msg):h.ZP.error(a.msg)},R=async t=>{let{data:n}=await j.Z.put("crms/auth/password/".concat(e._id),{currentPassword:t.currentPassword,newPassword:t.newPassword});n.status?(I(),h.ZP.success(n.msg)):h.ZP.error(n.msg)};return(0,r.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(o.ZP,{item:!0,md:6,sm:12,children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(l.Z,{title:"Update Profile"}),(0,r.jsx)(i.Z,{children:(0,r.jsxs)("form",{onSubmit:O(V),children:[(0,r.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,r.jsx)(u.Z,{children:(0,r.jsx)(y(),{style:{width:175,height:175,background:"dark"==t.mode?"#282a42":"#dddddd",backgroundImage:e.avatar?"url(".concat("/uploads","/avatars/").concat(e.avatar,")"):"",backgroundRepeat:"no-repeat",backgroundSize:"100%",borderRadius:5,marginRight:20,position:"relative"},deleteIcon:(0,r.jsx)(w.Z,{className:"delete-icon",style:{position:"absolute",top:20,left:-50,color:"#fafafa"},icon:"mdi:delete-circle"}),uploadIcon:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(w.Z,{icon:"mdi:camera",style:{width:50,height:50}}),(0,r.jsx)("span",{style:{fontSize:12},children:"PHOTO"})]}),onFileAdded:e=>k(e),onFileRemoved:e=>k({})})}),(0,r.jsxs)(u.Z,{sx:{flex:1},children:[(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"firstName",control:Z,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(d.Z,{label:"First Name",value:t,onChange:n,error:Boolean(E.firstName)})}}),E.firstName&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:E.firstName.message})]}),(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"lastName",control:Z,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(d.Z,{label:"Last Name",value:t,onChange:n,error:Boolean(E.lastName)})}}),E.lastName&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:E.lastName.message})]}),(0,r.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(o.ZP,{item:!0,md:6,sm:12,children:(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"email",control:Z,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(d.Z,{label:"Email",value:t,onChange:n,error:Boolean(E.email)})}}),E.email&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:E.email.message})]})}),(0,r.jsx)(o.ZP,{item:!0,md:6,sm:12,children:(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"phone",control:Z,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(x(),{mask:"(+44) 999 999 9999",maskChar:"_",value:t,onChange:n,children:()=>(0,r.jsx)(d.Z,{label:"Phone",placeholder:"8316235660",error:Boolean(E.phone)})})}}),E.phone&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:E.phone.message})]})})]})]})]}),(0,r.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,r.jsxs)(m.Z,{type:"submit",variant:"contained",size:"large",color:"primary",children:[(0,r.jsx)(w.Z,{icon:"mdi:content-save",style:{marginRight:5}})," Update"]})})]})})]})}),(0,r.jsx)(o.ZP,{item:!0,md:6,sm:12,children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(l.Z,{title:"Change Password"}),(0,r.jsx)(i.Z,{children:(0,r.jsxs)("form",{onSubmit:D(R),children:[(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"currentPassword",control:N,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(d.Z,{type:"password",label:"Current Password",value:t,onChange:n,error:Boolean(_.currentPassword)})}}),_.currentPassword&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:_.currentPassword.message})]}),(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"newPassword",control:N,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(d.Z,{type:"password",label:"New Password",value:t,onChange:n,error:Boolean(_.newPassword)})}}),_.newPassword&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:_.newPassword.message})]}),(0,r.jsxs)(c.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(v.Qr,{name:"confirmPassword",control:N,render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(d.Z,{type:"password",label:"Confirm Password",value:t,onChange:n,error:Boolean(_.confirmPassword)})}}),_.confirmPassword&&(0,r.jsx)(f.Z,{sx:{color:"error.main"},children:_.confirmPassword.message})]}),(0,r.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,r.jsxs)(m.Z,{type:"submit",variant:"contained",size:"large",color:"primary",children:[(0,r.jsx)(w.Z,{icon:"mdi:content-save",style:{marginRight:5}})," Change"]})})]})})]})})]})};Z.getLayout=e=>(0,r.jsx)(P.Z,{children:e}),t.default=Z},16250:function(){},77718:function(e,t,n){"use strict";var r=n(67294),a=r&&"object"==typeof r&&"default"in r?r:{default:r};function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){var r,a;r=e,a=n[t],t in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t=e.element;return t?a.default.createElement(a.default.Fragment,null,t):a.default.createElement("svg",{width:"50",height:"50",viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M8.33332 8.33332H14.5833L18.75 4.16666H31.25L35.4167 8.33332H41.6667C42.7717 8.33332 43.8315 8.77231 44.6129 9.55371C45.3943 10.3351 45.8333 11.3949 45.8333 12.5V37.5C45.8333 38.6051 45.3943 39.6649 44.6129 40.4463C43.8315 41.2277 42.7717 41.6666 41.6667 41.6666H8.33332C7.22825 41.6666 6.16845 41.2277 5.38704 40.4463C4.60564 39.6649 4.16666 38.6051 4.16666 37.5V12.5C4.16666 11.3949 4.60564 10.3351 5.38704 9.55371C6.16845 8.77231 7.22825 8.33332 8.33332 8.33332ZM25 14.5833C22.2373 14.5833 19.5878 15.6808 17.6343 17.6343C15.6808 19.5878 14.5833 22.2373 14.5833 25C14.5833 27.7627 15.6808 30.4122 17.6343 32.3657C19.5878 34.3192 22.2373 35.4167 25 35.4167C27.7627 35.4167 30.4122 34.3192 32.3657 32.3657C34.3192 30.4122 35.4167 27.7627 35.4167 25C35.4167 22.2373 34.3192 19.5878 32.3657 17.6343C30.4122 15.6808 27.7627 14.5833 25 14.5833ZM25 18.75C26.6576 18.75 28.2473 19.4085 29.4194 20.5806C30.5915 21.7527 31.25 23.3424 31.25 25C31.25 26.6576 30.5915 28.2473 29.4194 29.4194C28.2473 30.5915 26.6576 31.25 25 31.25C23.3424 31.25 21.7527 30.5915 20.5806 29.4194C19.4085 28.2473 18.75 26.6576 18.75 25C18.75 23.3424 19.4085 21.7527 20.5806 20.5806C21.7527 19.4085 23.3424 18.75 25 18.75Z",fill:"#848484"}))}function u(e){var t=e.icon;return t?a.default.createElement(a.default.Fragment,null,t):a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#848484"},a.default.createElement("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm7 14h-14v-4h14v4z"}))}e.exports=function(e){var t,n=e.onFileAdded,o=e.onFileRemoved,c=e.uploadIcon,d=e.deleteIcon,f=e.style,m=function(e){if(Array.isArray(e))return e}(t=r.useState({}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(i){l=!0,a=i}finally{try{s||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=m[0],h=m[1];return r.useEffect(function(){n&&n(p)},[p]),a.default.createElement("div",{className:"uploader__container"},a.default.createElement("div",{className:"uploader__placeholder",style:f},a.default.createElement("div",{className:"uploader__btn_wrapper"},a.default.createElement("div",{className:"uploader__btn",onClick:function(){o&&Object.keys(p).length>0&&o(p),h({})}},a.default.createElement(u,{icon:d}))),!(null!=p&&p.dataUrl)&&a.default.createElement("label",{id:"file_uploader",className:"uploader__file_input_label"},a.default.createElement(i,{element:c,color:null==f?void 0:f.color}),a.default.createElement("input",{className:"uploader__file_input",key:p,type:"file",name:"upload",onChange:function(e){if(e.target.files.length>0){var t={file:e.target.files[0],dataUrl:URL.createObjectURL(e.target.files[0])};h(function(e){return s(s({},e),t)})}},accept:"image/*",id:"file_uploader"})),(null==p?void 0:p.dataUrl)&&a.default.createElement("img",{className:"uploader__file",src:null==p?void 0:p.dataUrl,alt:null==p?void 0:p.dataUrl,loading:"lazy"})))}},76627:function(e,t,n){e.exports=n(53462)},53462:function(e,t,n){"use strict";var r,a=(r=n(67294))&&"object"==typeof r&&"default"in r?r.default:r,o=n(73935);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e,t,n,r,a,o,s,l){if(!e){var i;if(void 0===t)i=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,o,s,l],c=0;(i=Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw i.framesToPop=1,i}};function u(e,t,n){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=t,e.selectionEnd=n;else{var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}var c={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function d(e,t,n){var r="",a="",o=null,s=[];if(void 0===t&&(t="_"),null==n&&(n=c),!e||"string"!=typeof e)return{maskChar:t,formatChars:n,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var l=!1;return e.split("").forEach(function(e){l=!l&&"\\"===e||(l||!n[e]?(s.push(r.length),r.length===s.length-1&&(a+=e)):o=r.length+1,r+=e,!1)}),{maskChar:t,formatChars:n,prefix:a,mask:r,lastEditablePosition:o,permanents:s}}function f(e,t){return -1!==e.permanents.indexOf(t)}function m(e,t,n){var r=e.mask,a=e.formatChars;return!!n&&(f(e,t)?r[t]===n:RegExp(a[r[t]]).test(n))}function p(e,t){return t.split("").every(function(t,n){return f(e,n)||!m(e,n,t)})}function h(e,t){var n=e.maskChar,r=e.prefix;if(!n){for(;t.length>r.length&&f(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var a=r.length,o=t.length;o>=r.length;o--){var s=t[o];if(!f(e,o)&&m(e,o,s)){a=o+1;break}}return a}function v(e,t){return h(e,t)===e.mask.length}function g(e,t){var n=e.maskChar,r=e.mask,a=e.prefix;if(!n){for((t=w(e,"",t,0)).length<a.length&&(t=a);t.length<r.length&&f(e,t.length);)t+=r[t.length];return t}if(t)return w(e,g(e,""),t,0);for(var o=0;o<r.length;o++)f(e,o)?t+=r[o]:t+=n;return t}function w(e,t,n,r){var a=e.mask,o=e.maskChar,s=e.prefix,l=n.split(""),i=v(e,t);return!o&&r>t.length&&(t+=a.slice(t.length,r)),l.every(function(n){for(var l,u;f(e,u=r)&&n!==a[u];){if(r>=t.length&&(t+=a[r]),l=r,o&&f(e,l)&&n===o)return!0;if(++r>=a.length)return!1}return!m(e,r,n)&&n!==o||(r<t.length?t=o||i||r<s.length?t.slice(0,r)+n+t.slice(r+1):(t=t.slice(0,r)+n+t.slice(r),g(e,t)):o||(t+=n),++r<a.length)}),t}function k(e,t){for(var n=e.mask,r=t;r<n.length;++r)if(!f(e,r))return r;return null}function x(e){return e||0===e?e+"":""}function C(e){return"function"==typeof e}function b(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function y(e){return(b()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function j(e){(b()||clearTimeout)(e)}var P=function(e){function t(t){var n=e.call(this,t)||this;n.focused=!1,n.mounted=!1,n.previousSelection=null,n.selectionDeferId=null,n.saveSelectionLoopDeferId=null,n.saveSelectionLoop=function(){n.previousSelection=n.getSelection(),n.saveSelectionLoopDeferId=y(n.saveSelectionLoop)},n.runSaveSelectionLoop=function(){null===n.saveSelectionLoopDeferId&&n.saveSelectionLoop()},n.stopSaveSelectionLoop=function(){null!==n.saveSelectionLoopDeferId&&(j(n.saveSelectionLoopDeferId),n.saveSelectionLoopDeferId=null,n.previousSelection=null)},n.getInputDOMNode=function(){if(!n.mounted)return null;var e=o.findDOMNode(l(l(n))),t="undefined"!=typeof window&&e instanceof window.Element;if(e&&!t)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw Error("react-input-mask: inputComponent doesn't contain input node");return e},n.getInputValue=function(){var e=n.getInputDOMNode();return e?e.value:null},n.setInputValue=function(e){var t=n.getInputDOMNode();t&&(n.value=e,t.value=e)},n.setCursorToEnd=function(){var e=h(n.maskOptions,n.value),t=k(n.maskOptions,e);null!==t&&n.setCursorPosition(t)},n.setSelection=function(e,t,r){void 0===r&&(r={});var a=n.getInputDOMNode(),o=n.isFocused();a&&o&&(r.deferred||u(a,e,t),null!==n.selectionDeferId&&j(n.selectionDeferId),n.selectionDeferId=y(function(){n.selectionDeferId=null,u(a,e,t)}),n.previousSelection={start:e,end:t,length:Math.abs(t-e)})},n.getSelection=function(){return function(e){var t=0,n=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,n=e.selectionEnd;else{var r=document.selection.createRange();r.parentElement()===e&&(t=-r.moveStart("character",-e.value.length),n=-r.moveEnd("character",-e.value.length))}return{start:t,end:n,length:n-t}}(n.getInputDOMNode())},n.getCursorPosition=function(){return n.getSelection().start},n.setCursorPosition=function(e){n.setSelection(e,e)},n.isFocused=function(){return n.focused},n.getBeforeMaskedValueChangeConfig=function(){var e=n.maskOptions,t=e.mask,r=e.maskChar,a=e.permanents,o=e.formatChars;return{mask:t,maskChar:r,permanents:a,alwaysShowMask:!!n.props.alwaysShowMask,formatChars:o}},n.isInputAutofilled=function(e,t,r,a){var o=n.getInputDOMNode();try{if(o.matches(":-webkit-autofill"))return!0}catch(s){}return!n.focused||a.end<r.length&&t.end===e.length},n.onChange=function(e){var t,r,a,o,s,i,u,c,d,p,h,v,x,b,y,j,P,S,Z,O=l(l(n)).beforePasteState,E=l(l(n)).previousSelection,M=n.props.beforeMaskedValueChange,I=n.getInputValue(),N=n.value,D=n.getSelection();n.isInputAutofilled(I,D,N,E)&&(N=g(n.maskOptions,""),E={start:0,end:0,length:0}),O&&(E=O.selection,N=O.value,D={start:E.start+I.length,end:E.start+I.length,length:0},I=N.slice(0,E.start)+I+N.slice(E.end),n.beforePasteState=null);var _=(t=n.maskOptions,r=I,a=D,o=N,s=E,v=t.mask,x=t.prefix,b=t.lastEditablePosition,y=r,j="",P=0,S=0,Z=Math.min(s.start,a.start),a.end>s.start?(i=j=y.slice(s.start,a.end),u=Z,c=t.mask,d=t.maskChar,p=i.split(""),h=u,p.every(function(e){for(var n;f(t,n=u)&&e!==c[n];)if(++u>=c.length)return!1;return(m(t,u,e)||e===d)&&u++,u<c.length}),S=(P=u-h)?s.length:0):y.length<o.length&&(S=o.length-y.length),y=o,S&&(1!==S||s.length||(Z=s.start===a.start?k(t,a.start):function(e,t){for(var n=t;0<=n;--n)if(!f(e,n))return n;return null}(t,a.start)),y=function(e,t,n,r){var a=n+r,o=e.maskChar,s=e.mask,l=e.prefix,i=t.split("");if(o)return i.map(function(t,r){return r<n||a<=r?t:f(e,r)?s[r]:o}).join("");for(var u=a;u<i.length;u++)f(e,u)&&(i[u]="");return n=Math.max(l.length,n),i.splice(n,a-n),g(e,t=i.join(""))}(t,y,Z,S)),y=w(t,y,j,Z),(Z+=P)>=v.length?Z=v.length:Z<x.length&&!P?Z=x.length:Z>=x.length&&Z<b&&P&&(Z=k(t,Z)),j||(j=null),{value:y=g(t,y),enteredString:j,selection:{start:Z,end:Z}}),V=_.enteredString,R=_.selection,F=_.value;if(C(M)){var L=M({value:F,selection:R},{value:N,selection:E},V,n.getBeforeMaskedValueChangeConfig());F=L.value,R=L.selection}n.setInputValue(F),C(n.props.onChange)&&n.props.onChange(e),n.isWindowsPhoneBrowser?n.setSelection(R.start,R.end,{deferred:!0}):n.setSelection(R.start,R.end)},n.onFocus=function(e){var t=n.props.beforeMaskedValueChange,r=n.maskOptions,a=r.mask,o=r.prefix;if(n.focused=!0,n.mounted=!0,a){if(n.value)h(n.maskOptions,n.value)<n.maskOptions.mask.length&&n.setCursorToEnd();else{var s=g(n.maskOptions,o),l=g(n.maskOptions,s),i=h(n.maskOptions,l),u=k(n.maskOptions,i),c={start:u,end:u};if(C(t)){var d=t({value:l,selection:c},{value:n.value,selection:null},null,n.getBeforeMaskedValueChangeConfig());l=d.value,c=d.selection}var f=l!==n.getInputValue();f&&n.setInputValue(l),f&&C(n.props.onChange)&&n.props.onChange(e),n.setSelection(c.start,c.end)}n.runSaveSelectionLoop()}C(n.props.onFocus)&&n.props.onFocus(e)},n.onBlur=function(e){var t=n.props.beforeMaskedValueChange,r=n.maskOptions.mask;if(n.stopSaveSelectionLoop(),n.focused=!1,r&&!n.props.alwaysShowMask&&p(n.maskOptions,n.value)){var a="";C(t)&&(a=t({value:a,selection:null},{value:n.value,selection:n.previousSelection},null,n.getBeforeMaskedValueChangeConfig()).value);var o=a!==n.getInputValue();o&&n.setInputValue(a),o&&C(n.props.onChange)&&n.props.onChange(e)}C(n.props.onBlur)&&n.props.onBlur(e)},n.onMouseDown=function(e){if(!n.focused&&document.addEventListener){n.mouseDownX=e.clientX,n.mouseDownY=e.clientY,n.mouseDownTime=(new Date).getTime();var t=function e(t){if(document.removeEventListener("mouseup",e),n.focused){var r=Math.max(Math.abs(t.clientX-n.mouseDownX),Math.abs(t.clientY-n.mouseDownY)),a=(new Date).getTime()-n.mouseDownTime;(r<=10&&a<=200||r<=5&&a<=300)&&n.setCursorToEnd()}};document.addEventListener("mouseup",t)}C(n.props.onMouseDown)&&n.props.onMouseDown(e)},n.onPaste=function(e){C(n.props.onPaste)&&n.props.onPaste(e),e.defaultPrevented||(n.beforePasteState={value:n.getInputValue(),selection:n.getSelection()},n.setInputValue(""))},n.handleRef=function(e){null==n.props.children&&C(n.props.inputRef)&&n.props.inputRef(e)};var r=t.mask,a=t.maskChar,s=t.formatChars,i=t.alwaysShowMask,c=t.beforeMaskedValueChange,v=t.defaultValue,b=t.value;n.maskOptions=d(r,a,s),null==v&&(v=""),null==b&&(b=v);var P=x(b);if(n.maskOptions.mask&&(i||P)&&(P=g(n.maskOptions,P),C(c))){var S=t.value;null==t.value&&(S=v),P=c({value:P,selection:null},{value:S=x(S),selection:null},null,n.getBeforeMaskedValueChangeConfig()).value}return n.value=P,n}(n=t).prototype=Object.create(e.prototype),function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var a=n[r],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(n.prototype.constructor=n,e);var n,r=t.prototype;return r.componentDidMount=function(){var e;this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=(e=navigator.userAgent,/windows/i.test(e)&&/phone/i.test(e)),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},r.componentDidUpdate=function(){var e=this.previousSelection,t=this.props,n=t.beforeMaskedValueChange,r=t.alwaysShowMask,a=t.mask,o=t.maskChar,s=t.formatChars,l=this.maskOptions,i=r||this.isFocused(),u=null!=this.props.value,c=u?x(this.props.value):this.value,f=e?e.start:null;if(this.maskOptions=d(a,o,s),this.maskOptions.mask){!l.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==l.mask;if(l.mask||u||(c=this.getInputValue()),(m||this.maskOptions.mask&&(c||i))&&(c=g(this.maskOptions,c)),m){var w=h(this.maskOptions,c);(null===f||w<f)&&(f=v(this.maskOptions,c)?w:k(this.maskOptions,w))}!this.maskOptions.mask||!p(this.maskOptions,c)||i||u&&this.props.value||(c="");var b={start:f,end:f};if(C(n)){var y=n({value:c,selection:b},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());c=y.value,b=y.selection}this.value=c;var j=this.getInputValue()!==this.value;j?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var P=!1;null!=b.start&&null!=b.end&&(P=!e||e.start!==b.start||e.end!==b.end),(P||j)&&this.setSelection(b.start,b.end)}else l.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},r.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&j(this.selectionDeferId),this.stopSaveSelectionLoop()},r.render=function(){var e,t=this.props,n=(t.mask,t.alwaysShowMask,t.maskChar,t.formatChars,t.inputRef,t.beforeMaskedValueChange,t.children),r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)0<=t.indexOf(n=o[r])||(a[n]=e[n]);return a}(t,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(n){C(n)||i(!1);var o=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],l=s({},r);o.forEach(function(e){return delete l[e]}),e=n(l),o.filter(function(t){return null!=e.props[t]&&e.props[t]!==r[t]}).length&&i(!1)}else e=a.createElement("input",s({ref:this.handleRef},r));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(r.disabled||r.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),null!=r.value&&(u.value=this.value)),e=a.cloneElement(e,u)},t}(a.Component);e.exports=P}},function(e){e.O(0,[828,480,428,515,259,330,323,72,733,314,774,888,179],function(){return e(e.s=30417)}),_N_E=e.O()}]);